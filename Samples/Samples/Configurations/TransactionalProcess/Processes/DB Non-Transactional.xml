<?xml version="1.0"?>
<ESBMessagePipelineStorage xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Id>2314fcc1-8f54-4b45-8b58-55358f44037b</Id>
  <Version>98314b7d-e4e2-47da-877e-919c2fb39146</Version>
  <Name>DB Non-Transactional</Name>
  <Description />
  <IsSystemObject>false</IsSystemObject>
  <IsEncrypted>true</IsEncrypted>
  <PipelineBlob>&lt;ESBMessagePipeline xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.neuronesb.com/pipelines/"&gt;&lt;Category i:nil="true" /&gt;&lt;Description i:nil="true" /&gt;&lt;GlobalProperties xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Name&gt;DB Non-Transactional&lt;/Name&gt;&lt;Properties xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;ReferencedAssemblies xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" i:nil="true" /&gt;&lt;Steps&gt;&lt;ESBMessagePipelineStep i:type="ExceptionPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d4p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Name i:nil="true" /&gt;&lt;Uniquename i:nil="true" /&gt;&lt;Catch&gt;&lt;Bindings xmlns:d5p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Name i:nil="true" /&gt;&lt;Uniquename i:nil="true" /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="ESBMessageCodePipelineStep"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Name&gt;trace exception&lt;/Name&gt;&lt;Uniquename i:nil="true" /&gt;&lt;BreakPointLines xmlns:d7p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" i:nil="true" /&gt;&lt;Code&gt;
//get the current exception
Exception ex = (Exception)context.Properties["CurrentException"];

string msg = "Current Exception: ";
if(ex.InnerException != null)
{
	msg += ex.InnerException.Message;
}
else
{
	msg += ex.Message;
}

//trace to designer window
context.Instance.TraceError(msg);&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d7p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d7p1:string&gt;mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Neuron, Version=3.0.0.0, Culture=neutral, PublicKeyToken=ed764b6eccb2f6cc&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Neuron.Pipelines, Version=3.0.0.0, Culture=neutral, PublicKeyToken=ed764b6eccb2f6cc&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Neuron.Esb, Version=3.0.0.0, Culture=neutral, PublicKeyToken=ed764b6eccb2f6cc&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Typef004968672b40ed8294d816b7934e2&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Catch&gt;&lt;Finally&gt;&lt;Bindings xmlns:d5p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Name i:nil="true" /&gt;&lt;Uniquename i:nil="true" /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep xmlns:d6p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d6p1:EsbMessageQueryPipelineStep"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Name&gt;get orders&lt;/Name&gt;&lt;Uniquename i:nil="true" /&gt;&lt;Command xmlns="http://schemas.datacontract.org/2004/07/Neuron.Esb.Pipelines"&gt;SelectOrderItem&lt;/Command&gt;&lt;CommandType xmlns="http://schemas.datacontract.org/2004/07/Neuron.Esb.Pipelines"&gt;StoredProcedure&lt;/CommandType&gt;&lt;ConnectionString xmlns="http://schemas.datacontract.org/2004/07/Neuron.Esb.Pipelines"&gt;Data Source=.;Initial Catalog=MessageData;Integrated Security=True;Persist Security Info=False;&lt;/ConnectionString&gt;&lt;Parameters xmlns="http://schemas.datacontract.org/2004/07/Neuron.Esb.Pipelines"&gt;&lt;QueryParameter&gt;&lt;DefaultValue i:nil="true" /&gt;&lt;ParameterName&gt;@OrderID&lt;/ParameterName&gt;&lt;SelectionType&gt;XPath&lt;/SelectionType&gt;&lt;SelectionValue&gt;OrderID/text()&lt;/SelectionValue&gt;&lt;/QueryParameter&gt;&lt;/Parameters&gt;&lt;XPath xmlns="http://schemas.datacontract.org/2004/07/Neuron.Esb.Pipelines"&gt;Orders/Order&lt;/XPath&gt;&lt;commandTimeout xmlns="http://schemas.datacontract.org/2004/07/Neuron.Esb.Pipelines"&gt;30&lt;/commandTimeout&gt;&lt;connectionTimeout xmlns="http://schemas.datacontract.org/2004/07/Neuron.Esb.Pipelines"&gt;30&lt;/connectionTimeout&gt;&lt;Namespace i:nil="true" xmlns="http://schemas.datacontract.org/2004/07/Neuron.Esb.Pipelines" /&gt;&lt;RootElementName xmlns="http://schemas.datacontract.org/2004/07/Neuron.Esb.Pipelines"&gt;OrdersRetrieved&lt;/RootElementName&gt;&lt;RowElementName xmlns="http://schemas.datacontract.org/2004/07/Neuron.Esb.Pipelines"&gt;Order&lt;/RowElementName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep xmlns:d6p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d6p1:EsbMessageTraceMessagePipelineStep"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Name i:nil="true" /&gt;&lt;Uniquename i:nil="true" /&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Finally&gt;&lt;Try&gt;&lt;Bindings xmlns:d5p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Name i:nil="true" /&gt;&lt;Uniquename i:nil="true" /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="ESBMessageCodePipelineStep"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Name&gt;insert new order&lt;/Name&gt;&lt;Uniquename i:nil="true" /&gt;&lt;BreakPointLines xmlns:d7p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;try
{
	string cs = context.Data.GetProperty("db", "cs", "Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=MessageData;Data Source=.\\SQLExpress;");
	System.Xml.XmlDocument doc = context.Data.ToXmlDocument();
	
	using (System.Data.SqlClient.SqlConnection connection = new System.Data.SqlClient.SqlConnection(cs))
	{
		using (System.Data.SqlClient.SqlCommand command = connection.CreateCommand())
		{
			connection.Open();
			command.CommandType = System.Data.CommandType.Text;
			command.CommandText = "INSERT INTO [Order] (OrderID, OrderDate, OrderAmount) VALUES (@OrderID, '4/4/44','0.00')";
	
			System.Xml.XmlNodeList sectionNodes = doc.SelectNodes("//OrderID/text()");
			for(int i = 0; i &amp;lt; sectionNodes.Count; i++)
			{
				System.Xml.XmlNode sectionNode = sectionNodes[i];
				command.Parameters.Clear();
				command.Parameters.Add(new System.Data.SqlClient.SqlParameter("@OrderID", sectionNode.Value));
				command.ExecuteNonQuery();
			}
		}
	}
}
catch (Exception ex)
{
 	throw new PipelineException("Code step for sample pipeline failed: " + ex.Message, ex);
}&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d7p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d7p1:string&gt;mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Neuron, Version=3.0.0.0, Culture=neutral, PublicKeyToken=ed764b6eccb2f6cc&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Neuron.Pipelines, Version=3.0.0.0, Culture=neutral, PublicKeyToken=ed764b6eccb2f6cc&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Neuron.Esb, Version=3.0.0.0, Culture=neutral, PublicKeyToken=ed764b6eccb2f6cc&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type0d8059383b74862b88701b2371ea89&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep xmlns:d6p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d6p1:EsbMessageStorePipelineStep"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Name&gt;update order date&lt;/Name&gt;&lt;Uniquename i:nil="true" /&gt;&lt;Command&gt;update [Order] set OrderDate=@OrderDate where OrderID=@OrderID&lt;/Command&gt;&lt;CommandType&gt;Text&lt;/CommandType&gt;&lt;ConnectionString&gt;Data Source=.;Initial Catalog=MessageData;Integrated Security=True;Persist Security Info=False;&lt;/ConnectionString&gt;&lt;Parameters&gt;&lt;StoreParameter&gt;&lt;DefaultValue i:nil="true" /&gt;&lt;ParameterName&gt;@OrderID&lt;/ParameterName&gt;&lt;SelectionType&gt;XPath&lt;/SelectionType&gt;&lt;SelectionValue&gt;OrderID/text()&lt;/SelectionValue&gt;&lt;/StoreParameter&gt;&lt;StoreParameter&gt;&lt;DefaultValue i:nil="true" /&gt;&lt;ParameterName&gt;@OrderDate&lt;/ParameterName&gt;&lt;SelectionType&gt;XPath&lt;/SelectionType&gt;&lt;SelectionValue&gt;OrderDate/text()&lt;/SelectionValue&gt;&lt;/StoreParameter&gt;&lt;/Parameters&gt;&lt;XPath&gt;Orders/Order&lt;/XPath&gt;&lt;commandTimeout&gt;30&lt;/commandTimeout&gt;&lt;connectionTimeout&gt;30&lt;/connectionTimeout&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep xmlns:d6p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d6p1:EsbMessageStorePipelineStep"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Name&gt;update order amount&lt;/Name&gt;&lt;Uniquename i:nil="true" /&gt;&lt;Command&gt;update [Order] set OrderAmount=@OrderAmount where OrderID=@OrderID&lt;/Command&gt;&lt;CommandType&gt;Text&lt;/CommandType&gt;&lt;ConnectionString&gt;Data Source=.;Initial Catalog=MessageDat;Integrated Security=True;Persist Security Info=False;&lt;/ConnectionString&gt;&lt;Parameters&gt;&lt;StoreParameter&gt;&lt;DefaultValue i:nil="true" /&gt;&lt;ParameterName&gt;@OrderAmount&lt;/ParameterName&gt;&lt;SelectionType&gt;XPath&lt;/SelectionType&gt;&lt;SelectionValue&gt;OrderAmount/text()&lt;/SelectionValue&gt;&lt;/StoreParameter&gt;&lt;StoreParameter&gt;&lt;DefaultValue i:nil="true" /&gt;&lt;ParameterName&gt;@OrderID&lt;/ParameterName&gt;&lt;SelectionType&gt;XPath&lt;/SelectionType&gt;&lt;SelectionValue&gt;OrderID/text()&lt;/SelectionValue&gt;&lt;/StoreParameter&gt;&lt;/Parameters&gt;&lt;XPath&gt;Orders/Order&lt;/XPath&gt;&lt;commandTimeout&gt;30&lt;/commandTimeout&gt;&lt;connectionTimeout&gt;30&lt;/connectionTimeout&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Try&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Steps&gt;&lt;/ESBMessagePipeline&gt;</PipelineBlob>
</ESBMessagePipelineStorage>